<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Sorting Algorithm :)</title>
    <!-- https://codepen.io/leamZ/pen/MvVppL -->
    <!-- https://codepen.io/msurguy/pen/fBDJA -->
    <meta name="viewport" content="width=720">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#000000">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <style>
        @import url('https://fonts.googleapis.com/css?family=Raleway');
        * {
            font-family: Raleway, 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            background-color: white;
            color: black;
            text-align: center;
        }
        canvas {
            margin: 2em;
            border: 1px solid #0099CC;
        }
        /* https://medium.freecodecamp.org/a-quick-guide-to-styling-buttons-using-css-f64d4f96337f */
        button {
            background: white;
            border: 2px solid #0099CC;
            border-radius: 6px;
            padding: 16px 32px;
            text-align: center;
            display: inline-block;
            margin: 4px 2px;
            -webkit-transition-duration: 0.4s;
            transition-duration: 0.4s;
            cursor: pointer;
            text-decoration: none;
            text-transform: uppercase;
            color: black;
            font-size: 1.5em;
        }
        button:hover {
            background-color: #008CBA;
            color: white;
        }
        #step_counter {
            width: 80px;
            font-size: 2em;
            display: inline-block;
        }
        /* https://stackoverflow.com/questions/2756575/drawing-text-to-canvas-with-font-face-does-not-work-at-the-first-time */
        @font-face {
            font-family: raleway;
            src: url(raleway/Raleway-SemiBold.ttf);
        }
        /* https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_custom_checkbox */
        .container {
            display: block;
            position: relative;
            padding-left: 35px;
            text-align: left;
            margin: 6px 0;
            cursor: pointer;
            font-size: 18px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .container input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 20px;
            width: 20px;
            background-color: #eee;
        }
        .container:hover input~.checkmark {
            background-color: #ccc;
        }
        .container input:checked~.checkmark {
            background-color: #0099CC;
        }
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }
        .container input:checked~.checkmark:after {
            display: block;
        }
        .container .checkmark:after {
            left: 7px;
            top: 4px;
            width: 5px;
            height: 8px;
            border: solid white;
            border-width: 0 3px 3px 0;
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }
        /* https://www.w3schools.com/css/css_table.asp */
        table {
            width: 100%;
            padding: 2%;
            text-align: left;
        }
        th {
            padding: 20px;
            background-color: #0099CC;
            color: white;
            text-align: center;
            font-size: 24px;
        }
        td {
            padding: 10px;
        }
        /* https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_navbar_sticky */
        #navbar {
            overflow: hidden;
            background: #0099CC;
            padding: 0;
            margin: 0;
        }
        .content {
            padding: 16px;
        }
        .sticky {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
        }
        .sticky+.content {
            padding-top: 60px;
        }
        #step_counter {
            background: #0099CC;
            color: white;
        }
        @media screen and (max-width: 720px) {
            h1,
            p,
            table {
                width: 1215px;
                margin: 2em;
                text-align: center;
            }
            #navbar {
                width: 1290px;
                left: -10px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <h1>Sorting Visualizations</h1>
    <p>N = 100</p>
    <table>
        <tr>
            <th>Simple Sorts</th>
            <th>Efficient Sorts</th>
            <th>Hashing Sorts</th>
            <th>Tree Sorts</th>
            <th>Inefficient Sorts</th>
        </tr>
        <tr>
            <td><label class="container" for="bubble_check">Bubble sort<input type="checkbox" id="bubble_check" name="bubble_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="merge_check">Merge sort<input type="checkbox" id="merge_check" name="merge_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="bucket_check">Bucket sort<input type="checkbox" id="bucket_check" name="bucket_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="cycle_check">Cycle sort<input type="checkbox" id="cycle_check" name="cycle_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="gnome_check">Gnome sort<input type="checkbox" id="gnome_check" name="gnome_check" checked><span class="checkmark"></span></label></td>
        </tr>
        <tr>
            <td><label class="container" for="cocktail_check">Cocktail sort<input type="checkbox" id="cocktail_check" name="cocktail_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="strand_check">Strand sort<input type="checkbox" id="strand_check" name="strand_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="count_check">Counting sort<input type="checkbox" id="count_check" name="count_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="heap_check">Heap sort<input type="checkbox" id="heap_check" name="heap_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="slow_check">Slow sort<input type="checkbox" id="slow_check" name="slow_check" checked><span class="checkmark"></span></label></td>
        </tr>
        <tr>
            <td><label class="container" for="comb_check">Comb sort<input type="checkbox" id="comb_check" name="comb_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="stooge_check">Stooge sort<input type="checkbox" id="stooge_check" name="stooge_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="radix_check">Radix sort<input type="checkbox" id="radix_check" name="radix_check" checked><span class="checkmark"></span></label></td>
            <td></td>
            <td><label class="container" for="sleep_check">Sleep sort<input type="checkbox" id="sleep_check" name="sleep_check" checked><span class="checkmark"></span></label></td>
        </tr>
        <tr>
            <td><label class="container" for="insert_check">Insertion sort<input type="checkbox" id="insert_check" name="insert_check" checked><span class="checkmark"></span></label></td>
            <td><label class="container" for="quick_check">Quick sort<input type="checkbox" id="quick_check" name="quick_check" checked><span class="checkmark"></span></label></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td><label class="container" for="shell_check">Shell sort<input type="checkbox" id="shell_check" name="shell_check" checked><span class="checkmark"></span></label></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td><label class="container" for="select_check">Selection sort<input type="checkbox" id="select_check" name="select_check" checked><span class="checkmark"></span></label></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td><label class="container" for="pancake_check">Pancake sort<input type="checkbox" id="pancake_check" name="pancake_check" checked><span class="checkmark"></span></label></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
    <div id="navbar">
        <button id="reset">Reset</button>
        <button id="run">Run</button>
        <button id="pause">Pause</button>
        <button id="reverse_step">-</button>
        <div id="step_counter">0</div>
        <button id="step">+</button>
    </div>
    <div class="content">
        <canvas id="surface" width="1215" height="3900">This isn't displaying for some reason, and that's just sad :(</canvas>
    </div>
    <script>
        function swap(arr, i, j) {
            var temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
            return arr;
        }
        function bubble_sort(arr) {
            let steps = [],
                swapped = true,
                i = arr.length - 1;
            steps.push(arr.slice(0));
            while (swapped === true && i > 0) {
                swapped = false;
                for (let j = 0; j < i; j++) {
                    if (arr[j] > arr[j + 1]) {
                        swap(arr, j, j + 1);
                        swapped = true;
                    }
                    steps.push(arr.slice(0));
                }
                i -= 1;
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function cocktail_sort(arr){
            let steps = [],
                begin = 0,
                end = arr.length - 1;
            steps.push(arr.slice(0));
            while (begin <= end) {
                var new_begin = end,
                    new_end = begin,
                    swapped = false;
                for (var i = begin; i <= end; i++) {
                    if (arr[i] > arr[i + 1]) {
                        swap(arr, i, i + 1);
                        swapped = true;
                        new_end = i;
                    }
                    steps.push(arr.slice(0));
                }
                if (!swapped) break;
                end = new_end - 1;
                swapped = false;
                for (var i = end; i >= begin; i--) {
                    if (arr[i] > arr[i + 1]) {
                        swap(arr, i, i + 1);
                        new_begin = i;
                        swapped = true;
                    }
                    steps.push(arr.slice(0));
                }
                if (!swapped) break;
                begin = new_begin + 1;
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function comb_sort(arr) {
            let steps = [],
                swapped = true,
                gap = arr.length - 1;
            while (gap != 1 || swapped === true) {
                gap = Math.floor(gap / 1.25);
                if (gap < 1) gap = 1;
                var i = 0;
                swapped = false;
                while (i + gap < arr.length) {
                    steps.push(arr.slice(0));
                    if (arr[i] > arr[i + gap]) {
                        swap(arr, i, i + gap);
                        swapped = true;
                        steps.push(arr.slice(0));
                    }
                    i++;
                }
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function insert_sort(arr) {
            let steps = [];
            for (let i = 1; i < arr.length; i++) {
                let pos = i,
                    key = arr[i];
                while (pos > 0 && key < arr[pos - 1]) {
                    steps.push(arr.slice(0));
                    arr[pos] = arr[pos - 1];
                    pos = pos - 1;
                }
                arr[pos] = key;
                steps.push(arr.slice(0));
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function shell_sort(arr) {
            let steps = [],
                gaps = [701, 301, 132, 57, 23, 10, 4, 1];
            // https://en.wikipedia.org/wiki/Shellsort
            steps.push(arr.slice(0));
            for (let g in gaps) {
                let gap = gaps[g];
                for (let i = gap; i < arr.length; i++) {
                    let temp = arr[i];
                    for (var j = i; j >= gap & arr[j - gap] > temp; j -= gap) {
                        arr[j] = arr[j - gap];
                        steps.push(arr.slice(0));
                    }
                    arr[j] = temp;
                    steps.push(arr.slice(0));
                }
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function select_sort(arr) {
            let steps = [];
            for (let i = 0; i < arr.length; i++) {
                let smallest_index = i;
                for (let j = i + 1; j < arr.length; j++) {
                    if (arr[j] < arr[smallest_index]) {
                        smallest_index = j;
                    }
                    steps.push(arr.slice(0));
                }
                swap(arr, i, smallest_index);
                steps.push(arr.slice(0));
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function pancake_sort(arr) {
            let steps = [];
            for (var i = arr.length - 1; i >= 1; i--) {
                var maxIdx = 0,
                    max = arr[0];
                for (var j = 1; j <= i; j++) {
                    if (arr[j] > max) {
                        max = arr[j];
                        maxIdx = j;
                    }
                    steps.push(arr.slice(0));
                }
                if (maxIdx == i) continue;
                var newSlice;
                if (maxIdx > 0) {
                    newSlice = arr.slice(0, maxIdx + 1).reverse();
                    for (var j = 0; j <= maxIdx; j++) {
                        arr[j] = newSlice[j];
                        steps.push(arr.slice(0));
                    }
                }
                newSlice = arr.slice(0, i + 1).reverse();
                for (var j = 0; j <= i; j++) {
                    arr[j] = newSlice[j];
                    steps.push(arr.slice(0));
                }
                steps.push(arr.slice(0));
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function merge_sort_rec(arr, left, right, steps, leftIndex, rightIndex) {
            var a = 0;
            while (left.length && right.length) {
                arr[a++] = (right[0] < left[0] ? right.shift() : left.shift());
                steps.push(arr.slice(0));
            }
            while (left.length) {
                arr[a++] = left.shift();
                steps.push(arr.slice(0));
            }
            while (right.length) {
                arr[a++] = right.shift();
                steps.push(arr.slice(0));
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function merge_sort(arr, steps = [], leftIndex = 0, rightIndex = 100) {
            if (arr.length == 1) {
                return arr;
            }
            var mid = Math.floor(arr.length / 2),
                left = arr.slice(0, mid),
                right = arr.slice(mid);
            steps.push(arr.slice(0));
            merge_sort(left, steps, leftIndex, mid);
            merge_sort(right, steps, mid, rightIndex);
            merge_sort_rec(arr, left, right, steps, leftIndex, rightIndex);
            steps.push(arr.slice(0));
            return steps;
        }
        function strand_sort_merge(steps, left, right) {
            var res = [];
            while (left.length && right.length) {
                if (left[0] <= right[0]) {
                    res.push(left.shift());
                } else {
                    res.push(right.shift());
                }
                steps.push(res.slice(0));
            }
            while (left.length) {
                res.push(left.shift());
                steps.push(res.slice(0));
            }
            while (right.length) {
                res.push(right.shift());
                steps.push(res.slice(0));
            }
            steps.push(res.slice(0));
            return res;
        }
        function strand_sort_rec(arr, steps) {
            var result = [];
            while (arr.length) {
                var sorted = [],
                    remain = [];
                sorted.push(arr.shift());
                for (var i = 0; i < arr.length; i++) {
                    if (sorted[sorted.length - 1] <= arr[i]) {
                        sorted.push(arr[i]);
                    } else {
                        remain.push(arr[i]);
                    }
                }
                result = strand_sort_merge(steps, sorted, result);
                arr = remain;
                steps.push(arr.slice(0));
            }
            steps.push(arr.slice(0));
            return result;
        }
        function strand_sort(arr){
            let steps = [];
            steps.push(arr.slice(0));
            strand_sort_rec(arr, steps);
            return steps;
        }
        function quick_sort_rec(arr, steps, start = 0, end = -1) {
            if (end == -1) {
                end = arr.length - 1;
            }
            if (start >= end) {
                return;
            } else {
                let pivot = end;
                let higher = pivot - 1;
                let lower = start;
                while (lower <= higher) {
                    if (arr[lower] <= arr[pivot]) {
                        lower += 1;
                    } else {
                        let temp = arr[lower];
                        arr[lower] = arr[higher];
                        arr[higher] = temp;
                        higher -= 1;
                    }
                    steps.push(arr.slice(0));
                }
                let temp = arr[pivot];
                arr[pivot] = arr[lower];
                arr[lower] = temp;
                quick_sort_rec(arr, steps, start, higher);
                quick_sort_rec(arr, steps, lower + 1, pivot);
            }
        }
        function quick_sort(arr) {
            let steps = [];
            steps.push(arr.slice(0));
            quick_sort_rec(arr, steps);
            steps.push(arr.slice(0));
            return steps;
        }
        function bucket_insert(arr, steps) {
            for (var i = 1; i < arr.length; i++) {
                var temp = arr[i];
                for (var j = i - 1; j >= 0 && temp < arr[j]; j--){
                    arr[j + 1] = arr[j];
                } 
                arr[j + 1] = temp;
            }
        }
        function bucket_sort(arr) {
            let steps = [];
            steps.push(arr.slice(0));
            var bucket_number = 10;
            var buckets = [];
            for (var i = 0; i < bucket_number; i++) {
                buckets[i] = [];
                for (var j = 0; j < arr.length; j++) {
                    if (i == 0) {
                        if (Math.floor(arr[j] / bucket_number) < i + 1)
                            buckets[i].push(arr[j]);
                    }
                    if (i == bucket_number - 1) {
                        if (Math.floor(arr[j] / bucket_number) >= i) buckets[i].push(arr[j]);
                    }
                    if (i > 0 && i < bucket_number - 1) {
                        if (Math.floor(arr[j] / bucket_number) >= i &&Math.floor(arr[j] / bucket_number) < i + 1)
                            buckets[i].push(arr[j]);
                    }
                }
                steps.push(buckets[i].slice(0));
            }
            for (var i = 0; i < buckets.length; i++) {
                bucket_insert(buckets[i], steps);
                steps.push(buckets[i].slice(0));
            }
            var arr = [];
            for (var i = 0; i < buckets.length; i++) {
                for (var j = 0; j < buckets[i].length; j++) {
                    arr.push(buckets[i][j]);
                    steps.push(arr.slice(0));
                }
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function count_sort(arr) {
            let steps = [],
                z = 0,
                count = [],
                min = Math.min(...arr),
                max = Math.max(...arr);
            for (var i = min; i <= max; i++) {
                count[i] = 0;
            }
            for (var i = 0; i < arr.length; i++) {
                count[arr[i]]++;
                steps.push(arr.slice(0));
            }
            for (var i = min; i <= max; i++) {
                while (count[i]-- > 0) {
                    arr[z++] = i;
                    steps.push(arr.slice(0));
                }
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function radix_sort(arr) {
            let steps = [],
                buckets = [[],[],[],[],[],[],[],[],[],[]];
            steps.push(arr.slice(0));
            arr = arr.map(x => x.toString());
            let numDigits = Math.max(...arr.map(x => x.length));
            arr = arr.map(x => x.padStart(numDigits, '0'));
            for (var i = 0; i < numDigits; i++) {
                for (var j = 0; j < arr.length; j++) {
                    var num = parseInt(arr[j][arr[j].length - 1 - i]);
                    buckets[num].push(arr[j]);
                }
                var res = [];
                for (var j = 0; j < buckets.length; j++) {
                    while (buckets[j].length) {
                        res.push(buckets[j].shift());
                        steps.push(res.slice(0));
                    }
                }
                arr = res;
                steps.push(arr.slice(0));
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function cycle_sort(arr) {
            let steps = [],
            w = 0;
            for (var start = 0; start < arr.length - 1; start++) {
                var val = arr[start];
                var pos = start;
                for (var i = start + 1; i < arr.length; i++) {
                    if (arr[i] < val) 
                        pos++;
                }
                if (pos == start) 
                    continue;
                while (val == arr[pos]) 
                    pos++;
                var tmp = arr[pos];
                arr[pos] = val;
                val = tmp;
                steps.push(arr.slice(0));
                w++;

                while (pos != start) {
                    pos = start;
                    for (var i = start + 1; i < arr.length; i++) {
                        if (arr[i] < val) 
                            pos++;
                    }
                    while (val == arr[pos]) 
                        pos++;
                    var tmp = arr[pos];
                    arr[pos] = val;
                    val = tmp;
                    steps.push(arr.slice(0));
                    w++;
                }
            }
            steps.push(arr.slice(0));
            return steps;
        }
        function heap_sort_rec(arr, steps) {
            heapify(arr, steps);
            let end = arr.length - 1;
            while (end > 0) {
                swap(arr, 0, end);
                steps.push(arr.slice(0));
                heap_sift_down(arr, 0, end, steps);
                end--;
            }
        }
        function heapify(arr, steps) {
            let i = Math.floor(arr.length / 2 - 1);
            while (i >= 0) {
                heap_sift_down(arr, i, arr.length, steps);
                i--;
            }
        }
        function heap_sift_down(arr, start, end, steps) {
            let maxChild, child1, child2;
            while (start < end) {
                maxChild = start;
                child1 = 2 * start + 1;
                child2 = child1 + 1;
                if (child1 < end && arr[child1] > arr[maxChild]) maxChild = child1;
                if (child2 < end && arr[child2] > arr[maxChild]) maxChild = child2;
                if (maxChild == start) return;
                swap(arr, start, maxChild);
                steps.push(arr.slice(0));
                start = maxChild;
            }
        }
        function heap_sort(arr) {
            // https://en.wikipedia.org/wiki/Heapsort
            let steps = [];
            steps.push(arr.slice(0));
            heap_sort_rec(arr, steps);
            steps.push(arr.slice(0));
            return steps;
        }
        function gnome_sort(arr) {
            let steps = [],
                i = 1,
                j = 2;
            while (i < arr.length) {
                if (arr[i - 1] <= arr[i]) {
                    i = j;
                    j++;
                } else {
                    swap(arr, i - 1, i);
                    i--;
                    if (i == 0) {
                        i = j;
                        j++;
                    }
                }
                steps.push(arr.slice(0));
            }
            steps.push(arr.slice(0));
            return steps;
        }
        class Graphics {
            constructor(ctx, counter, names) {
                this.colours = [
                    "#CD5C5C", "#F08080", "#FA8072", "#E9967A", "#FFA07A", "#DC143C", "#FF0000",
                    "#B22222", "#8B0000", "#FFC0CB", "#FFB6C1", "#FF69B4", "#FF1493", "#C71585", "#DB7093",
                    "#FFA07A", "#FF7F50", "#FF6347", "#FF4500", "#FF8C00", "#FFA500", "#FFD700", "#FFFF00",
                    "#FFFFE0", "#FFFACD", "#FAFAD2", "#FFEFD5", "#FFE4B5", "#FFDAB9", "#EEE8AA", "#F0E68C",
                    "#BDB76B", "#E6E6FA", "#D8BFD8", "#DDA0DD", "#EE82EE", "#DA70D6", "#FF00FF", "#FF00FF",
                    "#BA55D3", "#9370DB", "#663399", "#8A2BE2", "#9400D3", "#9932CC", "#8B008B", "#800080",
                    "#4B0082", "#6A5ACD", "#483D8B", "#7B68EE", "#ADFF2F", "#7FFF00", "#7CFC00", "#00FF00",
                    "#32CD32", "#98FB98", "#90EE90", "#00FA9A", "#00FF7F", "#3CB371", "#2E8B57", "#228B22",
                    "#008000", "#006400", "#9ACD32", "#6B8E23", "#808000", "#556B2F", "#66CDAA", "#8FBC8B",
                    "#20B2AA", "#008B8B", "#008080", "#00FFFF", "#00FFFF", "#E0FFFF", "#AFEEEE", "#7FFFD4",
                    "#40E0D0", "#48D1CC", "#00CED1", "#5F9EA0", "#4682B4", "#B0C4DE", "#B0E0E6", "#ADD8E6",
                    "#87CEEB", "#87CEFA", "#00BFFF", "#1E90FF", "#6495ED", "#7B68EE", "#4169E1", "#0000FF",
                    "#0000CD", "#00008B", "#000080", "#191970", "#FFF8DC", "#FFEBCD", "#FFE4C4", "#FFDEAD",
                    "#F5DEB3", "#DEB887", "#D2B48C", "#BC8F8F", "#F4A460", "#DAA520", "#B8860B", "#CD853F",
                    "#D2691E", "#8B4513", "#A0522D", "#A52A2A", "#800000", "#FFFFFF", "#FFFAFA", "#F0FFF0",
                    "#F5FFFA", "#F0FFFF", "#F0F8FF", "#F8F8FF", "#F5F5F5", "#FFF5EE", "#F5F5DC", "#FDF5E6",
                    "#FFFAF0", "#FFFFF0", "#FAEBD7", "#FAF0E6", "#FFF0F5", "#FFE4E1", "#DCDCDC", "#D3D3D3",
                    "#C0C0C0", "#A9A9A9", "#808080", "#696969", "#778899", "#708090", "#2F4F4F", "#000000"
                ];
                this.permitted = [
                    0, 0, 0, 0, 0, 0, 0,
                    0, 0, 0, 0,
                    0, 0, 0,
                    0, 0,
                    0, 0, 0,
                ];
                this.CTX = ctx;
                this.block_width = 6;
                this.block_height = 200;
                this.X_offset = 300;
                this.Y_offset = 10;
                this.sort_animation = null;
                this.step = 0;
                this.counter = counter;
                this.names = names;
                this.update_step = function () {
                    this.counter.innerHTML = this.step;
                };
                this.display_names = function () {
                    this.CTX.font = "30px Arial";
                    for (let i = 0; i < this.names.length; i++) {
                        this.CTX.fillStyle = "#fff";
                        this.CTX.fillText(
                            this.names[i][0] + " Sort:",
                            100,
                            100 + graphics.block_height / 2 + i * this.block_height
                        );
                        this.CTX.fillStyle = this.names[i][1];
                        this.CTX.fillText(
                            this.names[i][0] + " Sort:",
                            100,
                            100 + graphics.block_height / 2 + i * this.block_height
                        );
                    }
                };
                this.display_block = function (x, y, height, colour) {
                    this.CTX.fillStyle = "#fff";
                    this.CTX.fillRect(x, y, this.block_width, this.block_height);
                    this.CTX.fillStyle = colour;
                    let offset = this.block_height - height * 1;
                    this.CTX.fillRect(x, y + offset, this.block_width, height * 1);
                };
                this.display_frame = function (frame, y_axis) {
                    for (let i = 0; i < frame.length; i++) {
                        this.display_block(
                            i * this.block_width + this.X_offset,
                            y_axis * this.block_height + this.Y_offset,
                            frame[i],
                            this.colours[this.colours.length - 1 - frame[i]]
                        );
                    }
                };
                this.display_step = function (holder) {
                    for (let i = 0; i < holder.length; i++) {
                        if (this.permitted[i] == 1) {
                            if (holder[i].length - 1 >= this.step) {
                                this.display_frame(holder[i][this.step], i);
                                this.names[i][1] = "#000";
                            } else {
                                this.display_frame(holder[i][holder[i].length - 1], i);
                                this.names[i][1] = "#0099CC";
                            }
                        } else {
                            this.blank_frame(holder[i][0], i);
                        }
                    }
                    this.update_step();
                    this.display_names();
                };
                this.display_sorts = function (holder) {
                    clearInterval(this.sort_animation);
                    this.sort_animation = setInterval(() => {
                        let running = false;
                        for (let i = 0; i < holder.length; i++) {
                            if (this.permitted[i] == 1) {
                                if (holder[i].length - 1 >= this.step) {
                                    running = true;
                                    this.display_frame(holder[i][this.step], i);
                                    this.names[i][1] = "#000";
                                } else {
                                    this.display_frame(holder[i][holder[i].length - 1], i);
                                    this.names[i][1] = "#0099CC";
                                }
                            } else {
                                this.blank_frame(holder[i][0], i);
                            }
                        }
                        this.step += 1;
                        this.update_step();
                        this.display_names();
                        if (running === false) {
                            clearInterval(this.sort_animation);
                        }
                    }, 20);
                };
                this.display_clear = function (holder) {
                    this.step = 0;
                    clearInterval(this.sort_animation);
                    this.display_step(holder);
                    for (let i = 0; i < this.names.length; i++) {
                        this.names[i][1] = "#000";
                    }
                    this.display_names();
                };
                this.display_pause = function () {
                    clearInterval(this.sort_animation);
                };
                this.blank_frame = function (frame, y_axis) {
                    for (let i = 0; i < frame.length; i++) {
                        this.display_block(
                            i * this.block_width + this.X_offset,
                            y_axis * this.block_height + this.Y_offset,
                            frame[i],
                            "#fff"
                        );
                    }
                }
            }
        }
        const Sort_num = 143;
        function make_list(num) {
            let arr = [];
            for (let i = 0; i < num; i++) {
                // arr.push(i);
                arr.push(Math.floor(Math.random() * 143));
            }
            return arr;
        }
        function run_sorts(arr) {
            let step_holder = [];
            step_holder.push(bubble_sort(arr.slice(0)));
            step_holder.push(cocktail_sort(arr.slice(0)));
            step_holder.push(comb_sort(arr.slice(0)));
            step_holder.push(insert_sort(arr.slice(0)));
            step_holder.push(shell_sort(arr.slice(0)));
            step_holder.push(select_sort(arr.slice(0)));
            step_holder.push(pancake_sort(arr.slice(0)));

            step_holder.push(merge_sort(arr.slice(0)));
            step_holder.push(strand_sort(arr.slice(0)));
            // Stooge
            step_holder.push(merge_sort(arr.slice(0)));
            step_holder.push(quick_sort(arr.slice(0)));
            
            step_holder.push(bucket_sort(arr.slice(0)));
            step_holder.push(count_sort(arr.slice(0)));
            step_holder.push(radix_sort(arr.slice(0)));

            step_holder.push(cycle_sort(arr.slice(0)));
            step_holder.push(heap_sort(arr.slice(0)));

            // Gnome Slow Sleep
            step_holder.push(gnome_sort(arr.slice(0)));
            step_holder.push(heap_sort(arr.slice(0)));
            step_holder.push(heap_sort(arr.slice(0)));
            return step_holder;
        }
        function include_sorts(boxes, graphics) {
            for (let i = 0; i < boxes.length; i++) {
                if (document.querySelector(boxes[i]).checked) {
                    graphics.permitted[i] = 1;
                } else {
                    graphics.permitted[i] = 0;
                }
            }
        }
        document.querySelector("#reset").onclick = function () {
            include_sorts(checkboxes, graphics)
            let current_list = make_list(Sort_num);
            current_holder = run_sorts(current_list);
            graphics.display_clear(current_holder);
        };
        document.querySelector("#run").onclick = function () {
            graphics.display_sorts(current_holder);
        };
        document.querySelector("#pause").onclick = function () {
            graphics.display_pause();
        };
        document.querySelector("#step").onclick = function () {
            graphics.step += 1;
            graphics.display_step(current_holder);
        };
        document.querySelector("#reverse_step").onclick = function () {
            if (graphics.step > 0) {
                graphics.step -= 1;
            }
            graphics.display_step(current_holder);
        };
        let checkboxes = [
            "#bubble_check","#cocktail_check","#comb_check","#insert_check","#shell_check","#select_check","#pancake_check",
            "#merge_check","#strand_check","#stooge_check","#quick_check",
            "#bucket_check","#count_check","#radix_check",
            "#cycle_check","#heap_check",
            "#gnome_check","#slow_check","#sleep_check"
        ];
        for (var i = 0; i < checkboxes.length; i++) {
            document.querySelector(checkboxes[i]).addEventListener('change', function () {
                include_sorts(checkboxes, graphics);
            });
        }
        let current_holder = [];
        let name_holder = [
            ["Bubble","#000"],["Cocktail","#000"],["Comb","#000"],["Insertion","#000"],["Shell","#000"],["Selection","#000"],["Pancake","#000"],
            ["Merge","#000"],["Strand","#000"],["Stooge","#000"],["Quick","#000"],
            ["Bucket","#000"],["Counting","#000"],["Radix","#000"],
            ["Cycle","#000"],["Heap","#000"],
            ["Gnome","#000"],["Slow","#000"],["Sleep","#000"],
        ];
        let graphics = new Graphics(
            document.querySelector("#surface").getContext("2d"),
            document.querySelector("#step_counter"),
            name_holder
        );
        document.querySelector("#reset").click();
        // https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_navbar_sticky
        window.onscroll = function () {
            stickyFunction()
        };
        var navbar = document.getElementById("navbar");
        var sticky = navbar.offsetTop;
        function stickyFunction() {
            if (window.pageYOffset >= sticky) {
                navbar.classList.add("sticky")
            } else {
                navbar.classList.remove("sticky");
            }
        }
    </script>
</body>
</html>
